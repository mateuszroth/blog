<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>[DRAFT] React Hooks - introduction and API pitfalls | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Hooks are** a new addition in React 16.8**. They let you use state and other React features without writing a class.  Hooks list basic hooks: useState, useEffect, useContext additional hooks: useRedu">
<meta name="keywords" content="React,React Hooks">
<meta property="og:type" content="article">
<meta property="og:title" content="[DRAFT] React Hooks - introduction and API pitfalls">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;01&#x2F;01&#x2F;DRAFT-React-Hooks-introduction-and-API-pitfalls&#x2F;index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Hooks are** a new addition in React 16.8**. They let you use state and other React features without writing a class.  Hooks list basic hooks: useState, useEffect, useContext additional hooks: useRedu">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-12-02T16:42:22.500Z">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-DRAFT-React-Hooks-introduction-and-API-pitfalls" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2019/01/01/DRAFT-React-Hooks-introduction-and-API-pitfalls/" class="article-date">
  <time datetime="2019-01-01T10:00:00.000Z" itemprop="datePublished">2019-01-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/React/">React</a>►<a class="article-category-link" href="/blog/categories/React/Hooks/">Hooks</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      [DRAFT] React Hooks - introduction and API pitfalls
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>Hooks are** a new addition in React 16.8**. They let you use state and other React features without writing a class.</li>
</ul>
<h2 id="Hooks-list"><a href="#Hooks-list" class="headerlink" title="Hooks list"></a>Hooks list</h2><ul>
<li>basic hooks: <code>useState</code>, <code>useEffect</code>, <code>useContext</code></li>
<li>additional hooks: <code>useReducer</code>, <code>useCallback</code>, <code>useMemo</code>, <code>useRef</code>, <code>useImperativeHandle</code>, <code>useLayoutEffect</code>, <code>useDebugValue</code></li>
</ul>
<h3 id="Hook-setState"><a href="#Hook-setState" class="headerlink" title="Hook setState"></a>Hook <code>setState</code></h3><ul>
<li><p>unlike the <code>setState</code> method found in class components, <code>useState</code> does not automatically merge update objects, so we have to manually set state for previous state values that we’re not intend to modify:<!--kg-card-begin: code--></p>
<p>setState(prevState =&gt; {</p>
<pre><code>// Object.assign would also work
return {...prevState, ...updatedValues};</code></pre><p>});<br>`</pre><!--kg-card-end: code--></p>
</li>
<li><p>alternative to the <code>setState</code> hook is the <code>useReducer</code> hook, which is more suited for managing state objects that contain multiple sub-values and not simple primitives like numbers, strings.</p>
</li>
<li><p><code>setState</code> - if the initial state is the result of an expensive computation, you may provide a function instead, which will be executed only on the initial render:<!--kg-card-begin: code--><pre><code>const [state, setState] = useState(() =&amp;gt; {
  const initialState = someExpensiveComputation(props);
  return initialState;
});</code></pre><!--kg-card-end: code--></p>
<h3 id="Hook-useEffect"><a href="#Hook-useEffect" class="headerlink" title="Hook useEffect"></a>Hook <code>useEffect</code></h3></li>
<li><p>you should call hooks at the top level of the render function, this means no conditional hooks:<!--kg-card-begin: code--><pre>`// BAD:<br>if (user.isAdmin) {</p>
<pre><code>useEffect(() =&amp;gt; {
    ...
});</code></pre><p>};</p>
<p>// GOOD:<br>useEffect(() =&gt; {</p>
<pre><code>if (user.isAdmin) {
    ...
};</code></pre><p>});`</pre><!--kg-card-end: code--></p>
</li>
<li><p>a second argument to <code>useEffect</code> that is the array of values that the effect depends on, so in below example the effect will be executed only when <code>props.source</code> changes:<!--kg-card-begin: code--><pre>`useEffect(<br>  () =&gt; {</p>
<pre><code>const subscription = props.source.subscribe();
return () =&amp;gt; {
  subscription.unsubscribe();
};</code></pre><p>  },<br>  [props.source],<br>);<br>`</pre><!--kg-card-end: code--></p>
<h3 id="Hook-useCallback"><a href="#Hook-useCallback" class="headerlink" title="Hook useCallback"></a>Hook <code>useCallback</code></h3></li>
<li><p>returns a <a href="https://en.wikipedia.org/wiki/Memoization" target="_blank" rel="noopener">memoized</a> callback</p>
</li>
<li><p>will return a memoized version of the callback that only changes if one of the dependencies has changed<!--kg-card-begin: code--><pre>`const memoizedCallback = useCallback(</p>
<pre><code>() =&amp;gt; {
    doSomething(a, b);
},
[a, b],</code></pre><p>);`</pre><!--kg-card-end: code--></p>
<h3 id="Hook-useMemo"><a href="#Hook-useMemo" class="headerlink" title="Hook useMemo"></a>Hook <code>useMemo</code></h3></li>
<li><p>If you’re doing expensive calculations while rendering, you can optimize them with <code>useMemo</code>:<!--kg-card-begin: code--><pre>`const [c1, setC1] = useState(0);<br>const [c2, setC2] = useState(0);</p>
<p>// This value will not be recomputed between re-renders<br>// unless the value of c1 changes<br>const sinOfC1: number = useMemo(() =&gt; Math.sin(c1) , [c1])`</pre><!--kg-card-end: code--></p>
</li>
<li><p><code>useMemo</code> is generalized version of  <code>useCallback</code> hook. <code>useMemo</code> is primarily used for caching values but can also be used for caching functions as <code>useCallback</code> is used for because <code>useCallback(fn, deps)</code> is equivalent to <code>useMemo(() =&amp;gt; fn, deps)</code>:<!--kg-card-begin: code--><pre>`// Some function ...<br>const f = () =&gt; { ... }</p>
<p>// The following are functionally equivalent<br>const callbackF = useCallback(f, [])<br>const callbackF = useMemo(() =&gt; f, [])</p>
<!--kg-card-end: code-->

</li>
</ul>
<h2 id="Sources"><a href="#Sources" class="headerlink" title="Sources"></a>Sources</h2><ul>
<li><a href="https://reactjs.org/docs/hooks-reference.html" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-reference.html</a>*   <a href="https://hackernoon.com/why-react-hooks-a-developers-perspective-2aedb8511f38" target="_blank" rel="noopener">https://hackernoon.com/why-react-hooks-a-developers-perspective-2aedb8511f38</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/01/DRAFT-React-Hooks-introduction-and-API-pitfalls/" data-id="ck3onwetw0005zps3evsofqvp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/React/" rel="tag">React</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/React-Hooks/" rel="tag">React Hooks</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2019/01/01/DRAFT-React-rendering-and-reconciliation-algorithm/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          [DRAFT] React rendering and reconciliation algorithm
        
      </div>
    </a>
  
  
    <a href="/blog/2019/01/01/DRAFT-OOP-SOLID/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">[DRAFT] OOP - SOLID</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Frontend/">Frontend</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/JavaScript/Basics/">Basics</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/JavaScript/OOP/">OOP</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/JavaScript/Performance/">Performance</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/JavaScript/Tests/">Tests</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Node-js/">Node.js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Node-js/Basics/">Basics</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/React/">React</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/React/Basics/">Basics</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/React/Hooks/">Hooks</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/React/React-Hooks/">React Hooks</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/React/TypeScript/">TypeScript</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Softwafe-Engineering/">Softwafe Engineering</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Softwafe-Engineering/Tests/">Tests</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Software-Engineering/">Software Engineering</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/Software-Engineering/OOP/">OOP</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Backend/" rel="tag">Backend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/C/" rel="tag">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Frontend/" rel="tag">Frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/OOP/" rel="tag">OOP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/React-Hooks/" rel="tag">React Hooks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Software-Engineering/" rel="tag">Software Engineering</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Tests/" rel="tag">Tests</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/TypeScript/" rel="tag">TypeScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Backend/" style="font-size: 12.5px;">Backend</a> <a href="/blog/tags/C/" style="font-size: 10px;">C#</a> <a href="/blog/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/blog/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/blog/tags/Node-js/" style="font-size: 12.5px;">Node.js</a> <a href="/blog/tags/OOP/" style="font-size: 12.5px;">OOP</a> <a href="/blog/tags/React/" style="font-size: 17.5px;">React</a> <a href="/blog/tags/React-Hooks/" style="font-size: 12.5px;">React Hooks</a> <a href="/blog/tags/Software-Engineering/" style="font-size: 15px;">Software Engineering</a> <a href="/blog/tags/Tests/" style="font-size: 12.5px;">Tests</a> <a href="/blog/tags/TypeScript/" style="font-size: 10px;">TypeScript</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2019/11/01/Frontend-React-various-notes/">Frontend &amp; React - various notes</a>
          </li>
        
          <li>
            <a href="/blog/2019/11/01/TypeScript-React/">TypeScript + React</a>
          </li>
        
          <li>
            <a href="/blog/2019/10/24/Node-js-basics/">Node.js basics</a>
          </li>
        
          <li>
            <a href="/blog/2019/09/22/JavaScript-CommonJS-vs-AMD/">JavaScript CommonJS vs AMD</a>
          </li>
        
          <li>
            <a href="/blog/2019/09/22/JavaScript-performance-time-measurement-of-function-calls/">JavaScript - performance / time measurement of function calls</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>